@model IEnumerable<PhotoGallery.Client.WebApp.Models.PhotoViewModel.PhotoModel>


<html>
<head>
       
</head>
<body>
   
          
        <button type="button" class="viewDialog col-md-offset-1" onclick="photoCreate()">
            <span class="glyphicon glyphicon-save"></span>Upload Photo
        </button>
 

        <div id="contentPlace">
           @Html.Partial("PhotoCollection");           
        </div>

        @section scripts {
    <script type="text/javascript">

        $(function () {

            var page = 0;
            var _inCallback = false;
            function loadItems() {
                if (page > -1 && !_inCallback) {
                    _inCallback = true;
                    page++;

                    $.ajax({
                        type: 'GET',
                        url: '@Url.Action("Manage", "UserAlbum")' + '?page=' + page,
                        success: function (data, textstatus) {
                            if (data != '') {
                                $("#contentPlace").append(data);
                            }
                            else {
                                page = -1;
                            }
                            _inCallback = false;

                        }
                    });
                }
            }



            $(window).scroll(function () {
                if ($(window).scrollTop() == $(document).height() - $(window).height()) {

                    loadItems();
                }
            });
        })

    
        function photoCreate() {
            $.ajax({
                type: 'GET',
                url: '@Url.Action("Create")',
                data: {},
                success: function (result) {
                    $("#dialogContent").html(result);
                }
            });
        }

        function photoEdit(photoId) {
          $.ajax({
                type: 'GET',
                url: '@Url.Action("EditPhoto")',
                data: { photoId: photoId },
                success: function (result) {
                    $("#dialogContent").html(result);
                }
            });
        }

        function photoDelete(photoId) {
             $.ajax({
                type: 'GET',
                url: '@Url.Action("DeletePhoto")',
                data: { photoId: photoId },
                success: function (result) {
                  $("#dialogContent").html(result);
                }
             });
        }

      
        $(document).ready(function () {

            $.ajaxSetup({ cache: false });
                                         

        $("body").on("click",".viewDialog", function (e) {
            e.preventDefault();
           
            $("<div id='dialogContent'></div>")
                .addClass("dialog")
                .appendTo("body")
                .load(this.href)
                .dialog({
                    title: $(this).attr("data-dialog-title"),
                    close: function () { $(this).remove() },
                    modal: true,
                    buttons: {
                        "Save": function () {
                            var form = $('form');
                            form.submit();
                        }
                    }
                });
        });
        $(".close").on("click", function (e) {
            e.preventDefault();
            $(this).closest(".dialog").dialog("close");
        });

  });
    </script>

        }
</body>
</html>


  
